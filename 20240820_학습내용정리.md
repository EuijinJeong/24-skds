
# 데이터 조회 및 처리 방법 정리

## 날짜를 조회하는 방법

날짜를 조회할 때는 아래와 같은 쿼리문을 사용한다:

```sql
SELECT
    SYSDATE
FROM
    DUAL; -- DUMMY TABLE (row가 하나만 있는 의미없는 테이블)
```

데이터베이스에서 날짜를 조회하는 기능을 많이 사용하는데, 이 때 이 쿼리문을 사용한다.

## 날짜를 문자로 변경하는 방법

쿼리문으로 입력하는 값은 문자열 형태인데, 데이터베이스에 저장된 정보는 날짜 형태이므로 형 변환을 반드시 해야 한다.
따라서 오라클에 내장되어 있는 `TO_DATE()` 메소드를 활용해서 문자열 형태를 날짜 형태로 변환해야 한다.

```sql
TO_DATE(변환하고 싶은 날짜의 문자열 형태, 변경할 날짜의 표현식)
```

### 예시:
```sql
TO_DATE('2024-08-21', 'YYYY-MM-DD')
```

## 문자를 날짜로 변경하는 방법

어떤 것을 문자 형태로 바꾸기 위해서는 `TO_CHAR()`를 사용한다.

### 사용 예:
```sql
SELECT
    TO_CHAR(SYSDATE)
    -- BUG (이렇게 사용하면 안됨. -> 실제 웹서버에서는 해당 SQL은 에러를 발생시킴.)
    ,
    TO_CHAR(SYSDATE, 'YYYY-MM-DD')
    -- 정상적으로 작동
FROM
    DUAL;
```

위의 주석에서 알 수 있듯이 SYSDATE만 작성하면 버그를 발생시킨다.

## `SELECT` - `FROM` 문법 정리

### 기본 형태:
```sql
SELECT 조회컬럼
FROM 테이블명;
```

`SELECT`에서 `*`를 사용하면 해당 테이블에 존재하는 모든 컬럼의 정보를 가져온다.

기본적으로 쿼리문을 작성할 때 `SELECT * FROM 테이블명`을 작성하고 쿼리문을 작성하는 것이 효율적이다.

## 데이터를 정렬하는 방법

데이터를 정렬할 때 `ORDER BY`라는 DML을 사용한다.
- `ASC`: 오름차순 정렬
- `DESC`: 내림차순 정렬

`ORDER BY`를 할 때 뒤에 명시를 하지 않으면 기본 값인 `ASC`가 적용된다. `ORDER BY`는 모든 쿼리문의 마지막 부분에 작성하며, 실제 실무에서는 정렬을 데이터베이스의 효율이 저하되기 때문에 잘 사용하지 않는다고 한다.

### 예시:
```sql
SELECT * FROM 테이블명 ORDER BY 컬럼명 ASC;
SELECT * FROM 테이블명 ORDER BY 컬럼명 DESC;
```

## 데이터를 필터링하는 방법

데이터를 필터링할 때 기본적으로 `WHERE`를 사용한다. 자바에서 조건문이라고 생각하면 이해하기 쉽다.

### 예시:
```sql
WHERE 컬럼명 = 조건식;
```

만약 앞 부분에 컬럼명이 아닌 다른 값이 오는 것도 데이터베이스 최적화에 문제가 될 수 있으므로 `WHERE`문을 작성할 때 반드시 앞 부분에 컬럼을 작성하고 `=` 뒤에 조건을 작성해야 한다.

## AND / OR 연산 순위 조정 방법

기본적으로 `AND`와 `OR` 중 `AND`의 연산자 우선순위가 더 높기 때문에 논리적으로 `OR` 연산이 먼저 실행되어야 하면 연산 우선순위를 높이기 위해 `()`를 이용하여 연산자 우선순위를 조정한다.

### 예시:
```sql
WHERE (조건식1) OR (조건식2 AND 조건식3);
```

## IN, LIKE, BETWEEN, NOT, IS NULL, IS NOT NULL 연산자의 사용 방법

- **`IN`**: 어떤 값이 안에 있는지 여부를 판단하는 DML이다. `IN`의 기본 연산은 `OR`이기 때문에 중복적인 `OR` 연산자를 작성하고 있다면 코드의 가독성을 위해 `IN`을 사용하여 코드를 작성할 수 있다.

    ### 예시:
    ```sql
    WHERE 컬럼명 IN (값1, 값2, 값3);
    ```

- **`LIKE`**: 어떤 값이 있는지를 검사할 때 사용된다. 만약 어떤 데이터에 특정 글자나 값이 존재하는지를 알고 싶다면 `LIKE` 연산자를 이용하면 된다. 자바로 생각하면 `String.contains`라고 생각하면 된다.

    ### 예시:
    ```sql
    WHERE 컬럼명 LIKE '%검색어%';
    ```

- **`BETWEEN`**: 말 그대로 어떤 값들을 비교할 때 사용된다. `BETWEEN A AND B` 이런 식으로 작성이 되는데 주로 날짜 연산이나 날짜를 비교할 때 사용된다.

    ### 예시:
    ```sql
    WHERE 컬럼명 BETWEEN 날짜1 AND 날짜2;
    ```

- **`NOT`**: 어떤 값이 있는지 없는지 여부를 Boolean으로 반환하여 판단할 때 사용한다.

    ### 예시:
    ```sql
    WHERE 컬럼명 NOT IN (값1, 값2, 값3);
    ```

- **`IS NULL`, `IS NOT NULL`**: 글자 그대로 어떤 값이 NULL인지 NULL이 아닌지 판단하는 DML이다.

    ### 예시:
    ```sql
    WHERE 컬럼명 IS NULL;
    WHERE 컬럼명 IS NOT NULL;
    ```

## 참고 사항

- 모든 SQL 구문은 데이터베이스에 따라 다소 다를 수 있으며, 본 문서의 내용은 오라클 데이터베이스를 기준으로 작성되었습니다.
- 효율적인 데이터베이스 사용을 위해 쿼리 작성 시 최적화에 주의해야 합니다.
