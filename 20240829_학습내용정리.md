# 패키지 구조와 주요 개념

## 1. 패키지 구성 요소

- **VO (Value Object):**
  - 데이터 패키지를 관리하는 엔티티와 같은 개념.
  - 불변의 고유 값을 가진 객체로 사용됨.
  - 실무에서는 VO를 통해 변경되지 않는 고유한 값을 관리함.

- **DTO (Data Transfer Object):**
  - 데이터 전송을 목적으로 하는 객체.
  - 주로 계층 간 데이터 교환에 사용됨.

- **DAO (Data Access Object):**
  - 데이터베이스와의 연동을 담당하는 객체.
  - 데이터에 접근하고 조작하는 역할을 수행.
  - DAO는 SQL 쿼리를 실행하고 결과를 반환하는 기능을 가짐.

- **Service:**
  - 비즈니스 로직을 처리하는 계층.
  - DAO를 호출하고 트랜잭션을 관리함.

## 2. 다대다 관계

- 다대다 관계를 해소하기 위해 생성한 패키지에서는 VO가 필요하지 않음.
- 다대다 관계를 해소하기 위한 DAO에서 `insert` 작업 시 필요한 외래 키(FK)만 파라미터로 받음.

## 3. SQL 인젝션 방어
> SQL 인젝션이란, 공격자가 웹 애플리케이션의 입력 필드에 악의적인 SQL 구문을 삽압하여 데이터베이스를 조작하는 공격 기법.
> 이를 통해 공격자는 데이터베이스의 데이터를 탈취하거나, 수정, 삭제할 수 있으며, 인증을 우회할 수 있다.

### 인젝션 방어하는 방법
- Spring Data JPA와 같은 ORM 프레임워크를 사용하는 것. 이 프레임워크는 내부적으로 SQL 인젝션을 방지한다.
- 네이티브 쿼리를 사용할 때는 파라미터 바인등을 꼭 사용해야한다. 네이티브 쿼리는 직접 SQL 구문을 작성하기 떄문에 SQL 인젝션의 위험이 더 높다. 파라미터 바인딩을 통해
  입력 값이 쿼리 문자열에 직접 포함되지 않게 하여 SQL 인젝션을 방지할 수 있다.

## 4. 추가 보완 내용

- **트랜잭션 관리:**
  - 서비스 계층에서는 트랜잭션의 시작과 종료를 제어하며, 여러 DAO 호출 간의 일관성을 유지함.
  - 트랜잭션이 실패할 경우, 롤백 처리를 통해 데이터의 무결성을 보호함.

- **DTO와 VO의 차이:**
  - VO는 불변 객체로, 주로 시스템 내부에서 고유 값을 가지는 데이터 관리에 사용됨.
  - DTO는 계층 간 데이터 전송에 사용되며, 시스템 내부 상태 변경을 허용하지 않음.

- **DAO와 Service의 역할 분리:**
  - DAO는 데이터 접근에만 집중하고, 비즈니스 로직은 서비스 계층에서 담당함으로써 코드의 책임 분리가 명확해짐.
  - 이러한 분리는 유지 보수성과 테스트 용이성을 높이는 데 기여함.

